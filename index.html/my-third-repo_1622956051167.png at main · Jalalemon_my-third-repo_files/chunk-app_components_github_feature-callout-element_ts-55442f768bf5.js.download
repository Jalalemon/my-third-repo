"use strict";(()=>{var q=Object.defineProperty;var a=(S,v)=>q(S,"name",{value:v,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_github_feature-callout-element_ts"],{3447:(S,v,y)=>{y.d(v,{D:()=>p,P:()=>E});var d=y(46263);function E(b=0,m={}){return(n,g,c)=>{if(!c||typeof c.value!="function")throw new Error("debounce can only decorate functions");const i=c.value;c.value=(0,d.P)(i,b,m),Object.defineProperty(n,g,c)}}a(E,"throttle");function p(b=0,m={}){return(n,g,c)=>{if(!c||typeof c.value!="function")throw new Error("debounce can only decorate functions");const i=c.value;c.value=(0,d.D)(i,b,m),Object.defineProperty(n,g,c)}}a(p,"debounce")},46263:(S,v,y)=>{y.d(v,{D:()=>E,P:()=>d});function d(p,b=0,{start:m=!0,middle:n=!0,once:g=!1}={}){let c=0,i,r=!1;function l(...h){if(r)return;const _=Date.now()-c;c=Date.now(),m?(m=!1,p.apply(this,h),g&&l.cancel()):(n&&_<b||!n)&&(clearTimeout(i),i=setTimeout(()=>{c=Date.now(),p.apply(this,h),g&&l.cancel()},n?b-_:b))}return a(l,"fn"),l.cancel=()=>{clearTimeout(i),r=!0},l}a(d,"throttle");function E(p,b=0,{start:m=!1,middle:n=!1,once:g=!1}={}){return d(p,b,{start:m,middle:n,once:g})}a(E,"debounce")},84818:(S,v,y)=>{y.d(v,{Z:()=>E});class d{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}}a(d,"NoOpStorage");function E(p,b={throwQuotaErrorsOnSet:!1},m=window){let n;try{n=m[p]}catch{n=new d}const{throwQuotaErrorsOnSet:g}=b;function c(l){try{return n.getItem(l)}catch{return null}}a(c,"getItem");function i(l,h){try{n.setItem(l,h)}catch(_){if(g&&_.message.toLowerCase().includes("quota"))throw _}}a(i,"setItem");function r(l){try{n.removeItem(l)}catch{}}return a(r,"removeItem"),{getItem:c,setItem:i,removeItem:r}}a(E,"safeStorage")},89434:(S,v,y)=>{y.r(v);var d=y(35803),E=y(84818),p=y(3447),b=Object.defineProperty,m=Object.getOwnPropertyDescriptor,n=a((r,l,h,_)=>{for(var C=_>1?void 0:_?m(l,h):l,A=r.length-1,P;A>=0;A--)(P=r[A])&&(C=(_?P(l,h,C):P(C))||C);return _&&C&&b(l,h,C),C},"__decorateClass");const{getItem:g,setItem:c}=(0,E.Z)("localStorage");let i=a(class extends HTMLElement{constructor(){super(...arguments);this.dismissEvent="click",this.labelClass="new-feature-label"}async connectedCallback(){this.bootstrapFromLocalStorage()||await this.bootstrapFromServer()}bootstrapFromLocalStorage(){const r=g(this.localStorageKey);return r?(this.bootstrap(JSON.parse(r)),!0):!1}get localStorageKey(){return`${i.LocalStoragePrefix}:${this.featureName}`}async bootstrapFromServer(){try{const r=await fetch(this.queryPath,{method:"GET",headers:i.FetchHeaders}),l=await r.text();if(!r.ok)throw new Error(`unexpected response status ${r.status}: '${l}'`);const h=JSON.parse(l);return this.bootstrap(h),h.dismissed&&c(this.localStorageKey,l),!0}catch(r){throw new Error(`failed to get feature state from server: ${r}`)}return!1}bootstrap(r){if(!("dismissed"in r)||r.dismissed===null)throw new Error(`malformed response, likely no notice configured: '${JSON.stringify(r)}'`);r.dismissed||(this.applyTargetDefaults(),this.showCallout(),this.dismisser.addEventListener(this.dismissEvent,this.handleDismissal.bind(this),{once:!0}),this.detectAndBindToTabContainer())}detectAndBindToTabContainer(){const r=this.querySelector("tab-container");r&&r.addEventListener("tab-container-changed",l=>{const h=l;h.detail&&h.detail.relatedTarget&&h.detail.relatedTarget.getAttribute("aria-labelledby")===this.dismisser.id&&this.handleDismissal()})}applyTargetDefaults(){if(!this.firstElementChild||this.labelee&&this.dismisser)return;let r=this.firstElementChild.getAttribute("data-target")||"";this.labelee||(r=r.concat(" feature-callout.labelee")),this.dismisser||(r=r.concat(" feature-callout.dismisser")),this.firstElementChild.setAttribute("data-target",r)}handleDismissal(){this.submitForm(),c(this.localStorageKey,'{"dismissed":true}')}showCallout(){this.labelee.classList.add(this.labelClass)}async submitForm(){const r=this.dismissalForm;if(!!r)try{const l=await fetch(r.action,{method:r.method,body:new FormData(r),headers:i.FetchHeaders});if(!l.ok)throw new Error(`unexpected response status ${l.status}: ${await l.text()}`)}catch(l){throw new Error(`failed to persist dismissal to server: ${l}`)}}},"FeatureCalloutElement");i.LocalStoragePrefix="feature-callout",i.FetchHeaders={"X-Requested-With":"XMLHttpRequest"},n([d.fA],i.prototype,"labelee",2),n([d.fA],i.prototype,"dismisser",2),n([d.fA],i.prototype,"dismissalForm",2),n([d.Lj],i.prototype,"queryPath",2),n([d.Lj],i.prototype,"featureName",2),n([d.Lj],i.prototype,"dismissEvent",2),n([d.Lj],i.prototype,"labelClass",2),n([(0,p.P)(1,{once:!0})],i.prototype,"handleDismissal",1),i=n([d.Ih],i)},35803:(S,v,y)=>{y.d(v,{Lj:()=>P,Ih:()=>N,fA:()=>F,GO:()=>M});const d=new WeakSet;function E(t){d.add(t),t.shadowRoot&&p(t.shadowRoot),n(t),m(t.ownerDocument)}a(E,"bind");function p(t){n(t),m(t)}a(p,"bindShadow");const b=new WeakMap;function m(t=document){if(b.has(t))return b.get(t);let e=!1;const o=new MutationObserver(u=>{for(const f of u)if(f.type==="attributes"&&f.target instanceof Element)i(f.target);else if(f.type==="childList"&&f.addedNodes.length)for(const w of f.addedNodes)w instanceof Element&&n(w)});o.observe(t,{childList:!0,subtree:!0,attributeFilter:["data-action"]});const s={get closed(){return e},unsubscribe(){e=!0,b.delete(t),o.disconnect()}};return b.set(t,s),s}a(m,"listenForBind");function n(t){for(const e of t.querySelectorAll("[data-action]"))i(e);t instanceof Element&&t.hasAttribute("data-action")&&i(t)}a(n,"bindElements");function g(t){const e=t.currentTarget;for(const o of c(e))if(t.type===o.type){const s=e.closest(o.tag);d.has(s)&&typeof s[o.method]=="function"&&s[o.method](t);const u=e.getRootNode();if(u instanceof ShadowRoot&&d.has(u.host)&&u.host.matches(o.tag)){const f=u.host;typeof f[o.method]=="function"&&f[o.method](t)}}}a(g,"handleEvent");function*c(t){for(const e of(t.getAttribute("data-action")||"").trim().split(/\s+/)){const o=e.lastIndexOf(":"),s=Math.max(0,e.lastIndexOf("#"))||e.length;yield{type:e.slice(0,o),tag:e.slice(o+1,s),method:e.slice(s+1)||"handleEvent"}}}a(c,"bindings");function i(t){for(const e of c(t))t.addEventListener(e.type,g)}a(i,"bindActions");function r(t,e){const o=t.tagName.toLowerCase();if(t.shadowRoot){for(const s of t.shadowRoot.querySelectorAll(`[data-target~="${o}.${e}"]`))if(!s.closest(o))return s}for(const s of t.querySelectorAll(`[data-target~="${o}.${e}"]`))if(s.closest(o)===t)return s}a(r,"findTarget");function l(t,e){const o=t.tagName.toLowerCase(),s=[];if(t.shadowRoot)for(const u of t.shadowRoot.querySelectorAll(`[data-targets~="${o}.${e}"]`))u.closest(o)||s.push(u);for(const u of t.querySelectorAll(`[data-targets~="${o}.${e}"]`))u.closest(o)===t&&s.push(u);return s}a(l,"findTargets");const h=a(t=>String(t).replace(/([A-Z]($|[a-z]))/g,"-$1").replace(/--/g,"-").replace(/^-|-$/,"").toLowerCase(),"dasherize");function _(t){const e=h(t.name).replace(/-element$/,"");try{window.customElements.define(e,t),window[t.name]=customElements.get(e)}catch(o){if(o instanceof DOMException&&o.name==="NotSupportedError")return;throw o}}a(_,"register");function C(t){for(const e of t.querySelectorAll("template[data-shadowroot]"))e.parentElement===t&&t.attachShadow({mode:e.getAttribute("data-shadowroot")==="closed"?"closed":"open"}).append(e.content.cloneNode(!0))}a(C,"autoShadowRoot");const A="attr";function P(t,e){D(t,A).add(e)}a(P,"attr");const $=new WeakSet;function k(t,e){if(!$.has(t)){$.add(t),e||(e=D(Object.getPrototypeOf(t),A));for(const o of e){const s=t[o],u=O(o);let f={configurable:!0,get(){return this.getAttribute(u)||""},set(w){this.setAttribute(u,w||"")}};typeof s=="number"?f={configurable:!0,get(){return Number(this.getAttribute(u)||0)},set(w){this.setAttribute(u,w)}}:typeof s=="boolean"&&(f={configurable:!0,get(){return this.hasAttribute(u)},set(w){this.toggleAttribute(u,w)}}),Object.defineProperty(t,o,f),o in t&&!t.hasAttribute(u)&&f.set.call(t,s)}}}a(k,"initializeAttrs");const O=a(t=>`data-${h(t)}`,"attrToAttributeName");function R(t){let e=t.observedAttributes||[];Object.defineProperty(t,"observedAttributes",{configurable:!0,get(){return[...D(t.prototype,A)].map(O).concat(e)},set(o){e=o}})}a(R,"defineObservedAttributes");const L=Symbol.for("catalyst");class I{constructor(e){const o=this,s=e.prototype.connectedCallback;e.prototype.connectedCallback=function(){o.connectedCallback(this,s)};const u=e.prototype.disconnectedCallback;e.prototype.disconnectedCallback=function(){o.disconnectedCallback(this,u)};const f=e.prototype.attributeChangedCallback;e.prototype.attributeChangedCallback=function(T,x,K){o.attributeChangedCallback(this,T,x,K,f)};let w=e.observedAttributes||[];Object.defineProperty(e,"observedAttributes",{configurable:!0,get(){return o.observedAttributes(this,w)},set(T){w=T}}),R(e),_(e)}observedAttributes(e,o){return o}connectedCallback(e,o){e.toggleAttribute("data-catalyst",!0),customElements.upgrade(e),C(e),k(e),E(e),o?.call(e),e.shadowRoot&&p(e.shadowRoot)}disconnectedCallback(e,o){o?.call(e)}attributeChangedCallback(e,o,s,u,f){k(e),o!=="data-catalyst"&&f&&f.call(e,o,s,u)}}a(I,"CatalystDelegate");function D(t,e){if(!Object.prototype.hasOwnProperty.call(t,L)){const s=t[L],u=t[L]=new Map;if(s)for(const[f,w]of s)u.set(f,new Set(w))}const o=t[L];return o.has(e)||o.set(e,new Set),o.get(e)}a(D,"meta");function F(t,e){D(t,"target").add(e),Object.defineProperty(t,e,{configurable:!0,get(){return r(this,e)}})}a(F,"target");function M(t,e){D(t,"targets").add(e),Object.defineProperty(t,e,{configurable:!0,get(){return l(this,e)}})}a(M,"targets");function N(t){new I(t)}a(N,"controller")}}]);})();

//# sourceMappingURL=app_components_github_feature-callout-element_ts-0b3df2763383.js.map